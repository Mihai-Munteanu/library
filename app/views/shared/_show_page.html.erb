<%
  # Extract configuration from locals
  resource = local_assigns.fetch(:resource)
  title = local_assigns.fetch(:title)
  index_path = local_assigns.fetch(:index_path)
  edit_path = local_assigns[:edit_path]
  delete_confirmation_path = local_assigns[:delete_confirmation_path]

  details_sections = local_assigns.fetch(:details_sections, [])
  related_sections = local_assigns.fetch(:related_sections, [])
%>
<div class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8">
  <!-- Header Section -->
  <%= render "shared/page_header",
      title: title,
      index_path: index_path,
      edit_path: edit_path,
      delete_confirmation_path: delete_confirmation_path,
      from_page: "show" %>

  <!-- Details Sections -->
  <% details_sections.each do |section| %>
    <%= render "shared/details_card",
        title: section[:title] || "Details",
        fields: section[:fields] || [],
        grid_cols: section[:grid_cols] || "grid-cols-1 sm:grid-cols-2 lg:grid-cols-3" %>
  <% end %>

  <!-- Related Sections -->
  <% related_sections.each do |section| %>
    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-4">
      <h2 class="text-xl sm:text-2xl font-bold text-gray-900"><%= section[:title] %></h2>
      <% if section[:new_path] %>
        <%= link_to section[:new_text] || "Add New", section[:new_path],
            class: "bg-blue-500 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded text-center transition-colors shadow-md hover:shadow-lg w-full sm:w-auto" %>
      <% end %>
    </div>

    <% if section[:container_id] %>
      <div id="<%= section[:container_id] %>">
        <%= render section[:partial], section[:locals] || {} %>
      </div>
    <% else %>
      <%= render section[:partial], section[:locals] || {} %>
    <% end %>
  <% end %>
</div>

